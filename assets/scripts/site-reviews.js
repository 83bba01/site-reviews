function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}window.hasOwnProperty("GLSR")||(window.GLSR={}),function(){"use strict";GLSR.Ajax=function(){},GLSR.Ajax.prototype={get:function(t,i,n){this.t(i),this.xhr.open("GET",t,!0),this.xhr.responseType="text",this.i(n),this.xhr.send()},s:function(t){return"json"===this.xhr.responseType?t({message:this.xhr.statusText},!1):"text"===this.xhr.responseType?t(this.xhr.statusText):void 0},o:function(t){if(0===this.xhr.status||this.xhr.status>=200&&this.xhr.status<300||304===this.xhr.status){if("json"===this.xhr.responseType)return t(this.xhr.response.data,this.xhr.response.success);if("text"===this.xhr.responseType)return t(this.xhr.responseText)}else this.s(t)},isFileSupported:function(){var t=document.createElement("INPUT");return t.type="file","files"in t},isFormDataSupported:function(){return!!window.FormData},isUploadSupported:function(){var t=new XMLHttpRequest;return!!(t&&"upload"in t&&"onprogress"in t.upload)},post:function(t,i,n){this.t(i),this.xhr.open("POST",GLSR.ajaxurl,!0),this.xhr.responseType="json",this.i(n),this.xhr.send(this.h(t))},t:function(t){this.xhr=new XMLHttpRequest,this.xhr.onload=this.o.bind(this,t),this.xhr.onerror=this.s.bind(this,t)},u:function(t,i,n){return"object"!==_typeof(i)||i instanceof Date||i instanceof File?t.append(n,i||""):Object.keys(i).forEach(function(s){i.hasOwnProperty(s)&&(t=this.u(t,i[s],n?n[s]:s))}.bind(this)),t},h:function(t){var i=new FormData;return"[object HTMLFormElement]"===Object.prototype.toString.call(t)&&(i=new FormData(t)),"[object Object]"===Object.prototype.toString.call(t)&&Object.keys(t).forEach(function(n){i.append(n,t[n])}),i.append("action",GLSR.action),i.append("_ajax_request",!0),i},i:function(t){for(var i in(t=t||{})["X-Requested-With"]="XMLHttpRequest",t)t.hasOwnProperty(i)&&this.xhr.setRequestHeader(i,t[i])}}}(),function(){"use strict";GLSR.Excerpts=function(t){this.l(t||document)},GLSR.Excerpts.prototype={config:{hiddenClass:"glsr-hidden",hiddenTextSelector:".glsr-hidden-text",readMoreClass:"glsr-read-more",visibleClass:"glsr-visible"},v:function(t){var i=document.createElement("span"),n=document.createElement("a");n.setAttribute("href","#"),n.setAttribute("data-text",t.getAttribute("data-show-less")),n.innerHTML=t.getAttribute("data-show-more"),n.addEventListener("click",this.m.bind(this)),i.setAttribute("class",this.config.readMoreClass),i.appendChild(n),t.parentNode.insertBefore(i,t.nextSibling)},m:function(t){t.preventDefault();var i=t.currentTarget,n=i.parentNode.previousSibling,s=i.getAttribute("data-text");n.classList.toggle(this.config.hiddenClass),n.classList.toggle(this.config.visibleClass),i.setAttribute("data-text",i.innerText),i.innerText=s},l:function(t){for(var i=t.querySelectorAll(this.config.hiddenTextSelector),n=0;n<i.length;n++)this.v(i[n])}}}(),function(){"use strict";var t=function(t,i){this.button=i,this.config=GLSR.validationconfig,this.form=t,this.recaptcha=new GLSR.Recaptcha(this),this.strings=GLSR.validationstrings,this.useAjax=this.p(),this.validation=new GLSR.Validation(t)};t.prototype={S:function(t,i,n){t.classList[n?"add":"remove"](i)},_:function(){this.button.setAttribute("disabled","")},R:function(){this.button.removeAttribute("disabled")},L:function(t,i){var n=!0===i;"unset"!==t.recaptcha?("reset"===t.recaptcha&&this.recaptcha.g(),n&&(this.recaptcha.g(),this.form.reset()),this.G(t.errors),this.T(t.message,n),this.R(),t.form=this.form,document.dispatchEvent(new CustomEvent("site-reviews/after/submission",{detail:t})),n&&""!==t.redirect&&(window.location=t.redirect)):this.recaptcha.F()},l:function(){this.form.addEventListener("submit",this.j.bind(this)),this.k(),this.recaptcha.O()},k:function(){new StarRating("select.glsr-star-rating",{clearable:!1,showText:!1})},p:function(){var t=new GLSR.Ajax,i=!0;return[].forEach.call(this.form.elements,function(n){"file"===n.type&&(i=t.isFileSupported()&&t.isUploadSupported())}),i&&!this.form.classList.contains("no-ajax")},j:function(t){if(!this.validation.C())return t.preventDefault(),void this.T(this.strings.errors,!1);this.M(),(this.form["g-recaptcha-response"]&&""===this.form["g-recaptcha-response"].value||this.useAjax)&&(t.preventDefault(),this.D())},M:function(){this.T("",!0),this.validation.g()},G:function(t){if(t)for(var i in t)if(t.hasOwnProperty(i)){var n=GLSR.nameprefix?GLSR.nameprefix+"["+i+"]":i,s=this.form.querySelector('[name="'+n+'"]');this.validation.q(s,t[i]),this.validation.H(s.validation,"add")}},T:function(t,i){var n=this.form.querySelector("."+this.config.message_tag_class);null===n&&((n=document.createElement(this.config.message_tag)).className=this.config.message_tag_class,this.button.parentNode.insertBefore(n,this.button.nextSibling)),this.S(n,this.config.message_error_class,!i),this.S(n,this.config.message_success_class,i),n.classList.remove(this.config.message_initial_class),n.innerHTML=t},D:function(t){(new GLSR.Ajax).isFormDataSupported()?(this._(),this.form[GLSR.nameprefix+"[_counter]"].value=t||0,(new GLSR.Ajax).post(this.form,this.L.bind(this))):this.T(this.strings.unsupported,!1)}},GLSR.Forms=function(i){var n,s;this.nodeList=document.querySelectorAll("form.glsr-form"),this.forms=[];for(var e=0;e<this.nodeList.length;e++)(s=this.nodeList[e].querySelector("[type=submit]"))&&(n=new t(this.nodeList[e],s),i&&n.l(),this.forms.push(n))}}(),function(){"use strict";var t=function(t){this.el=t,this.I()};t.prototype={config:{hideClass:"glsr-hide",linkSelector:".glsr-pagination a",scrollTime:468},L:function(t,i,n){var s=this.el.querySelector(".glsr-pagination"),e=this.el.querySelector(".glsr-reviews");n&&e&&s?(s.outerHTML=i.pagination,e.outerHTML=i.reviews,this.A(this.el),this.el.classList.remove(this.config.hideClass),this.I(),window.history.pushState(null,"",t),new GLSR.Excerpts(this.el)):window.location=t},I:function(){for(var t=this.el.querySelectorAll(this.config.linkSelector),i=0;i<t.length;i++)t[i].addEventListener("click",this.m.bind(this))},m:function(t){var i=this.el.querySelector("glsr-pagination");if(i){var n={};n["".concat(GLSR.nameprefix,"[_action]")]="fetch-paged-reviews",n["".concat(GLSR.nameprefix,"[atts]")]=i.dataset.atts,n["".concat(GLSR.nameprefix,"[url]")]=t.currentTarget.href,this.el.classList.add(this.config.hideClass),t.preventDefault(),(new GLSR.Ajax).post(n,this.L.bind(this,t.currentTarget.href))}},A:function(t,i){var n;i=i||16;for(var s=0;s<GLSR.ajaxpagination.length;s++)(n=document.querySelector(GLSR.ajaxpagination[s]))&&"fixed"===window.getComputedStyle(n).getPropertyValue("position")&&(i+=n.clientHeight);var e=t.getBoundingClientRect().top-i;e>0||this.B({endY:e,offset:window.pageYOffset,startTime:window.performance.now(),startY:t.scrollTop})},B:function(t){var i=(window.performance.now()-t.startTime)/this.config.scrollTime;i=i>1?1:i;var n=.5*(1-Math.cos(Math.PI*i)),s=t.startY+(t.endY-t.startY)*n;window.scroll(0,t.offset+s),s!==t.endY&&window.requestAnimationFrame(this.B.bind(this,t))}},GLSR.Pagination=function(){this.navs=[];var i=document.querySelectorAll(".glsr-ajax-pagination");i.length&&i.forEach(function(i){this.navs.push(new t(i))}.bind(this))}}(),function(){"use strict";GLSR.Recaptcha=function(t){this.Form=t,this.counter=0,this.id=-1,this.is_submitting=!1,this.observer=new MutationObserver(function(t){var i=t.pop();i.target&&"visible"!==i.target.style.visibility&&(this.observer.disconnect(),setTimeout(function(){this.is_submitting||this.Form.R()}.bind(this),250))}.bind(this))},GLSR.Recaptcha.prototype={F:function(){if(-1!==this.id)return this.counter=0,this.N(this.id),void grecaptcha.execute(this.id);setTimeout(function(){this.counter++,this.D.call(this.Form,this.counter)}.bind(this),1e3)},N:function(t){var i=window.___grecaptcha_cfg.clients[t];for(var n in i)if(i.hasOwnProperty(n)&&"[object String]"===Object.prototype.toString.call(i[n])){var s=document.querySelector("iframe[name=c-"+i[n]+"]");if(s){this.observer.observe(s.parentElement.parentElement,{attributeFilter:["style"],attributes:!0});break}}},O:function(){this.Form.form.onsubmit=null;var t=this.Form.form.querySelector(".glsr-recaptcha-holder");t&&(t.innerHTML="",this.U(t))},U:function(t){setTimeout(function(){if("undefined"==typeof grecaptcha||void 0===grecaptcha.render)return this.U(t);this.id=grecaptcha.render(t,{callback:this.D.bind(this.Form,this.counter),"expired-callback":this.g.bind(this),isolated:!0},!0)}.bind(this),250)},g:function(){this.counter=0,this.is_submitting=!1,-1!==this.id&&grecaptcha.reset(this.id)},D:function(t){if(this.recaptcha.is_submitting=!0,!this.useAjax)return this._(),void this.form.submit();this.D(t)}}}(),function(){"use strict";function t(t){var i='input[name="'+t.getAttribute("name")+'"]:checked';return t.validation.form.querySelectorAll(i).length}var i={email:{fn:function(t){return!t||/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}},max:{fn:function(i,n){return!i||("checkbox"===this.type?t(this)<=parseInt(n):parseFloat(i)<=parseFloat(n))}},maxlength:{fn:function(t,i){return!t||t.length<=parseInt(i)}},min:{fn:function(i,n){return!i||("checkbox"===this.type?t(this)>=parseInt(n):parseFloat(i)>=parseFloat(n))}},minlength:{fn:function(t,i){return!t||t.length>=parseInt(i)}},number:{fn:function(t){return!t||!isNaN(parseFloat(t))},priority:2},required:{fn:function(i){return"radio"===this.type||"checkbox"===this.type?t(this):void 0!==i&&""!==i},priority:99,halt:!0}};GLSR.Validation=function(t){this.config=GLSR.validationconfig,this.form=t,this.form.setAttribute("novalidate",""),this.strings=GLSR.validationstrings,this.l()},GLSR.Validation.prototype={V:["required","max","maxlength","min","minlength","pattern"],X:"input:not([type^=hidden]):not([type^=submit]), select, textarea",P:function(t){var i=~["radio","checkbox"].indexOf(t.getAttribute("type"))||"SELECT"===t.nodeName?"change":"input";t.addEventListener(i,function(t){this.C(t.target)}.bind(this))},W:function(t,i,n){[].forEach.call(t,function(t){~this.V.indexOf(t.name)?this.Y(i,n,t.name,t.value):"type"===t.name&&this.Y(i,n,t.value)}.bind(this))},Y:function(t,n,s,e){if(i[s]&&(i[s].name=s,t.push(i[s]),e)){var r=e.split(",");r.unshift(null),n[s]=r}},g:function(){for(var t in this.fields)this.fields.hasOwnProperty(t)&&(this.fields[t].errorElements=null,this.fields[t].input.classList.remove(this.config.input_error_class));[].map.call(this.form.querySelectorAll("."+this.config.error_tag_class),function(t){t.parentNode.classList.remove(this.config.field_error_class),t.parentNode.removeChild(t)}.bind(this))},$:function(){var t=[].slice.call(arguments),i=t[0],n=t.slice(1);return Object.keys(n).forEach(function(t){for(var s in n[t])n[t].hasOwnProperty(s)&&(i[s]=n[t][s])}),i},J:function(t){if(t.errorElements)return t.errorElements;var i,n=t.input.closest("."+this.config.field_class);return n&&null===(i=n.closest("."+this.config.error_tag_class))&&((i=document.createElement(this.config.error_tag)).className=this.config.error_tag_class,n.appendChild(i)),t.errorElements=[n,i]},l:function(){this.fields=[].map.call(this.form.querySelectorAll(this.X),function(t){return this.K(t)}.bind(this))},K:function(t){var i={},n=[];return this.W(t.attributes,n,i),this.Z(n),this.P(t),t.validation={form:this.form,input:t,params:i,validators:n}},H:function(t,i){var n=this.J(t),s="add"===i;t.input.classList[i](this.config.input_error_class),n[0]&&n[0].classList[i](this.config.field_error_class),n[1]&&(n[1].innerHTML=s?t.errors.join("<br>"):"",n[1].style.display=s?"":"none")},q:function(t,i){t.validation||this.K(t),t.validation.errors=i},Z:function(t){t.sort(function(t,i){return(i.priority||1)-(t.priority||1)})},C:function(t){var i=!0,n=this.fields;for(var s in t instanceof HTMLElement&&(n=[t.validation]),n)if(n.hasOwnProperty(s)){var e=n[s];this.tt(e)?this.H(e,"remove"):(i=!1,this.H(e,"add"))}return i},tt:function(t){var i=[],n=!0;for(var s in t.validators)if(t.validators.hasOwnProperty(s)){var e=t.validators[s],r=t.params[e.name]?t.params[e.name]:[];if(r[0]=t.input.value,!e.fn.apply(t.input,r)){n=!1;var o=this.strings[e.name];if(i.push(o.replace(/(\%s)/g,r[1])),!0===e.halt)break}}return t.errors=i,n}}}(),document.addEventListener("DOMContentLoaded",function(){for(var t=document.querySelectorAll(".glsr-widget, .glsr-shortcode"),i=0;i<t.length;i++){var n=window.getComputedStyle(t[i],null).getPropertyValue("direction");t[i].classList.add("glsr-"+n)}document.all&&!window.atob||(new GLSR.Forms(!0),new GLSR.Pagination,new GLSR.Excerpts)});
