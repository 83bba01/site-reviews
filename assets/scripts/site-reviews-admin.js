!function(o){"use strict";GLSR.Ajax={post:function(t,i){var s={action:GLSR.action,request:t};o.post(GLSR.ajaxurl,s,function(t){"function"==typeof i&&i(t)})},postFromEvent:function(t,i,s){t.preventDefault();var n=o(t.target);if(!n.is(":disabled")){i.nonce=i.nonce||n.closest("form").find("#_wpnonce").val();var e={action:GLSR.action,request:i};n.prop("disabled",!0),o.post(GLSR.ajaxurl,e,function(t){"function"==typeof s&&s(t),n.prop("disabled",!1)})}}}}(jQuery),function(t){"use strict";GLSR.ColorPicker=function(){"object"==typeof t.wp&&"function"==typeof t.wp.wpColorPicker&&t(document).find("input[type=text].color-picker-hex").each(function(){t(this).wpColorPicker(t(this).data("colorpicker")||{})})}}(jQuery),function(){"use strict";var t=function(t){this.el=document.querySelector(t),this.el&&(this.depends=this.el.querySelectorAll("[data-depends]"),this.depends.length&&this.t())};t.prototype={t:function(){for(var t=this.el.elements,i=0;i<t.length;i++)-1!==["INPUT","SELECT"].indexOf(t[i].nodeName)&&t[i].addEventListener("change",this.i.bind(this))},s:function(t,i){return"checkbox"===t.type?!!t.checked:Array.isArray(i.value)?-1!==this.n(i.value).indexOf(this.e(t.value)):this.e(i.value)===this.e(t.value)},e:function(t){return-1!==["true","on","yes","1"].indexOf(t)||-1===["false","off","no","0"].indexOf(t)&&t},n:function(t){return t.map(this.normalizeValue)},i:function(n){this.depends.forEach(function(t){var i=t.getAttribute("data-depends");if(i){var s;try{s=JSON.parse(i)}catch(t){return console.log(i),console.error(t)}s.name===n.target.name.replace("[]","")&&this.o(t,this.s(n.target,s))}}.bind(this))},o:function(t,i){var s=t.closest(".glsr-field");s&&s.classList[i?"remove":"add"]("hidden")}},GLSR.Forms=t}(),function(s){"use strict";var t=function(){s("form").on("click","#clear-log",this.h)};t.prototype={h:function(t){var i={action:"clear-log",nonce:GLSR.logger_nonce};GLSR.Ajax.postFromEvent(t,i,function(t){GLSR.Notices(t.notices),s("#log-file").val(t.logger)})}},GLSR.Logger=t}(jQuery),function(i){"use strict";GLSR.Notices=function(t){t&&(i("#glsr-notices").length||(i("#message.notice").remove(),i("form#post").before('<div id="glsr-notices" />')),i("#glsr-notices").html(t),i(document).trigger("wp-updates-notice-added"))}}(jQuery),function(s){"use strict";var t=function(){this.el=s("#pinned-status-select"),this.target=null,this.el&&this.t()};t.prototype={t:function(){s("a.cancel-pinned-status").on("click",this.c.bind(this)),s("a.edit-pinned-status").on("click",this.u.bind(this)),s("a.save-pinned-status").on("click",this.r.bind(this)),s("table td.pinned i").on("click",this.a.bind(this))},c:function(t){t.preventDefault(),this.el.slideUp("fast").siblings("a.edit-pinned-status").show().focus(),this.el.find("select").val("0"===s("#hidden-pinned-status").val()?1:0)},u:function(t){t.preventDefault(),this.el.is(":hidden")&&(this.el.slideDown("fast",function(){this.el.find("select").focus()}.bind(this)),s(this.el).hide())},r:function(t){t.preventDefault(),this.el.slideUp("fast").siblings("a.edit-pinned-status").show().focus(),this.target=t.target;var i={action:"toggle-pinned",id:s("#post_ID").val(),nonce:GLSR.pinned_nonce,pinned:s("#pinned-status").val()};GLSR.Ajax.post(i,this.l.bind(this))},a:function(t){t.preventDefault(),this.target=t.target;var i={action:"toggle-pinned",id:t.target.getAttribute("data-id"),nonce:GLSR.pinned_nonce};GLSR.Ajax.post(i,this.f.bind(this))},l:function(t){s("#pinned-status").val(0|!t.pinned),s("#hidden-pinned-status").val(0|t.pinned),s("#pinned-status-text").text(t.pinned?this.target.dataset.yes:this.target.dataset.no),GLSR.Notices(t.notices)},f:function(t){this.target.classList[t.pinned?"add":"remove"]("pinned")}},GLSR.Pinned=t}(jQuery),function(i){"use strict";var t=function(){i.each(GLSR.pointers,function(t,i){this.t(i)}.bind(this))};t.prototype={d:function(t){i.post(GLSR.ajaxurl,{action:"dismiss-wp-pointer",pointer:t})},t:function(t){i(t.target).pointer({content:t.options.content,position:t.options.position,close:this.d.bind(t.id)}).pointer("open").pointer("sendToTop"),i(document).on("wp-window-resized",function(){i(t.target).pointer("reposition")})}},GLSR.Pointers=t}(jQuery),function(t,i,e){"use strict";var s=function(t,i){this.el=e(t),this.options=i,this.searchTerm=null,this.t()};s.prototype={defaults:{action:null,exclude:[],onInit:null,onResultClick:null,results:{},selected:-1,selectedClass:"glsr-selected-result",selectorEntries:".glsr-strings-table tbody",selectorResults:".glsr-search-results",selectorSearch:".glsr-search-input"},t:function(){this.options=e.extend({},this.defaults,this.options),this.el.length&&(this.options.entriesEl=this.el.parent().find(this.options.selectorEntries),this.options.resultsEl=this.el.find(this.options.selectorResults),this.options.searchEl=this.el.find(this.options.selectorSearch),this.options.searchEl.attr("aria-describedby","live-search-desc"),"function"==typeof this.options.onInit&&this.options.onInit.call(this),this.p())},p:function(){this.options.searchEl.on("input",t.debounce(this.v.bind(this),500)),this.options.searchEl.on("keyup",this._.bind(this)),this.options.searchEl.on("keydown keypress",function(t){GLSR.keys.ENTER===t.which&&t.preventDefault()}),e(document).on("click",this.S.bind(this)),e(document).on("keydown",this.g.bind(this))},m:function(){void 0!==this.searchRequest&&this.searchRequest.abort()},R:function(){this.m(),this.options.resultsEl.empty(),this.el.removeClass("is-active"),e("body").removeClass("glsr-focus")},L:function(t){var i=this.options.entriesEl.children("tr").eq(t),s=this;i.find("td").css({backgroundColor:"#faafaa"}),i.fadeOut(350,function(){e(this).remove(),s.options.results={},s.G(),s.y()})},w:function(t){e("body").addClass("glsr-focus"),this.options.resultsEl.append(t),this.options.resultsEl.children("span").on("click",this.k.bind(this))},b:function(){this.options.entriesEl.on("click","a.delete",this.C.bind(this)),this.options.entriesEl.sortable({items:"tr",tolerance:"pointer",start:function(t,i){i.placeholder.height(i.helper[0].scrollHeight)},sort:function(t,i){var s=t.pageY-e(this).offsetParent().offset().top-i.helper.outerHeight(!0)/2;i.helper.css({top:s+"px"})}})},x:function(t){this.options.selected+=t,this.options.results.removeClass(this.options.selectedClass),this.options.selected<0&&(this.options.selected=-1,this.options.searchEl.focus()),this.options.selected>=this.options.results.length&&(this.options.selected=this.options.results.length-1),0<=this.options.selected&&this.options.results.eq(this.options.selected).addClass(this.options.selectedClass).focus()},S:function(t){e(t.target).find(this.el).length&&e("body").hasClass("glsr-focus")&&this.R()},g:function(t){if(this.options.results){if(GLSR.keys.ESC===t.which&&this.R(),GLSR.keys.ENTER===t.which||GLSR.keys.SPACE===t.which){var i=this.options.resultsEl.find("."+this.options.selectedClass);i&&i.trigger("click")}GLSR.keys.UP===t.which&&(t.preventDefault(),this.x(-1)),GLSR.keys.DOWN===t.which&&(t.preventDefault(),this.x(1))}},C:function(t){t.preventDefault(),this.L(e(t.target).closest("tr").index())},k:function(t){t.preventDefault(),"function"==typeof this.options.onResultClick&&this.options.onResultClick.call(this,t),this.R()},v:function(t){return this.m(),this.searchTerm===t.target.value&&this.options.results.length?this.w(this.options.results):(this.options.resultsEl.empty(),this.options.selected=-1,this.searchTerm=t.target.value,""===this.searchTerm?this.T():(this.el.addClass("is-active"),void(this.searchRequest=i.ajax.post(GLSR.action,{request:{action:this.options.action,exclude:this.options.exclude,nonce:this.el.find("#_search_nonce").val(),search:this.searchTerm}}).done(function(t){this.el.removeClass("is-active"),this.w(t.items?t.items:t.empty),this.options.results=this.options.resultsEl.children(),delete this.searchRequest}.bind(this)))))},_:function(t){GLSR.keys.ESC===t.which&&this.T(),GLSR.keys.ENTER===t.which&&(this.v(t),t.preventDefault())},onUnassign:function(t){t.preventDefault();var i=this.el.find(".description");this.el.find("input#assigned_to").val(""),i.find("a").css({color:"#c00"}),i.fadeOut("fast",function(){e(this).html("").show()})},G:function(){var n=this;this.options.exclude=[],this.options.entriesEl.children("tr").each(function(s){e(this).find(".glsr-string-td2").children().filter(":input").each(function(){var t=e(this),i=t.attr("name").replace(/\[\d+\]/i,"["+s+"]");t.attr("name",i),t.is("[data-id]")&&n.options.exclude.push({id:t.val()})})})},T:function(){this.R(),this.options.results={},this.options.searchEl.val("")},y:function(){var t=0<this.options.entriesEl.children().length?"remove":"add";this.options.entriesEl.parent()[t+"Class"]("glsr-hidden")}},GLSR.Search=s}(window.j,window.wp,jQuery),function(t,i,s){"use strict";var n=function(t){this.el=document.querySelector(t),this.el&&(this.current=null,this.editor=null,this.button=this.el.querySelector("button"),this.menuItems=this.el.querySelectorAll(".mce-menu-item"),this.button&&this.menuItems.length&&(this.create=function(t){this.editor=i.get(t),this.editor&&GLSR.Ajax.post({action:"mce-shortcode",nonce:GLSR.mce_nonce,shortcode:this.current},this.Q.bind(this))},this.t()))};n.prototype={z:{},I:[],t:function(){document.addEventListener("click",this.D.bind(this)),this.button.addEventListener("click",this.A.bind(this)),this.menuItems.forEach(function(t){t.addEventListener("click",this.P.bind(this))}.bind(this))},N:function(){i.execCommand("GLSR_Shortcode")},V:function(){s("#scTemp").length?this.N():(s("body").append('<textarea id="scTemp" style="display:none;"/>'),i.init({elements:"scTemp",mode:"exact",plugins:["glsr_shortcode","wplink"]}),setTimeout(function(){this.N()},200))},d:function(){s(this.button).removeClass("active"),s(this.el).find(".glsr-mce-menu").hide()},q:function(){var t=s("#scTemp");t.length&&(i.get("scTemp").remove(),t.remove())},K:function(t){for(var i in this.z=t,this.I=[],t)t.hasOwnProperty(i)&&(this.U(i),this.F(i),this.H(i));this.z.hide=this.I.join(",")},U:function(t){"count"!==t||s.isNumeric(this.z[t])||(this.z[t]="")},F:function(t){if(GLSR.hidden_keys.hasOwnProperty(this.current)){var i=t.substring("hide_".length);-1!==GLSR.hidden_keys[this.current].indexOf(i)&&(this.z[t]&&this.I.push(i),delete this.z[t])}},H:function(t){"id"===t&&(this.z[t]=(+new Date).toString(36))},D:function(t){s(t.target).closest(s(this.el)).length||this.d()},A:function(t){t.preventDefault(),t.target.classList.contains("active")?this.d():this.O()},P:function(t){t.preventDefault(),this.current=t.target.dataset.shortcode,this.current&&(i.get(window.wpActiveEditor)?this.N():this.V(),setTimeout(function(){this.d()}.bind(this),100))},O:function(){s(this.button).addClass("active"),s(this.el).find(".glsr-mce-menu").show()},Q:function(t){if(t.body){if(0===t.body.length)return window.send_to_editor("["+t.shortcode+"]"),void this.q();var i=this.W(t);t.ok.constructor===Array&&(i.buttons[0].text=t.ok[0],i.buttons[0].onclick="close",delete i.buttons[1]),this.editor.windowManager.open(i)}},B:function(t){return[{classes:"btn glsr-btn primary",onclick:this.J.bind(this),text:t.ok},{onclick:"close",text:t.close}]},W:function(t){return{title:t.title,body:t.body,classes:"glsr-mce-popup",minWidth:320,buttons:this.B(t),onsubmit:this.M.bind(this,t),onclose:this.q.bind(this)}},M:function(t,i){var s="";for(var n in this.K(i.data),this.z)this.z.hasOwnProperty(n)&&""!==this.z[n]&&(s+=" "+n+'="'+this.z[n]+'"');window.send_to_editor("["+t.shortcode+s+"]")},J:function(){var t=this.editor.windowManager.getWindows()[0];this.X(t)&&t.submit()},X:function(t){var i,s=!0,n=GLSR.shortcodes[this.current];for(var e in n)if(n.hasOwnProperty(e)&&void 0!==(i=t.find("#"+e)[0])&&""===i.state.data.value){s=!1,alert(n[e]);break}return s}},GLSR.Shortcode=n}(window.editor,window.tinymce,jQuery),function(e){"use strict";var t=function(t){var i=document.querySelectorAll(t);i.length&&i.forEach(function(t){t.addEventListener("click",this.h)}.bind(this))};t.prototype={h:function(s){var t=s.target.href.match(/post=([0-9]+)/),i=s.target.href.match(/action=([a-z]+)/);if(null!==t&&null!==i){var n={action:"change-review-status",nonce:GLSR.status_nonce,post_id:t[1],status:i[1]};GLSR.Ajax.postFromEvent(s,n,function(t){if(t.class){var i=e(s.target);i.closest("tr").removeClass("status-pending status-publish").addClass(t.class),i.closest("td.column-title").find("strong").html(t.link)}})}}},GLSR.Status=t}(jQuery),function(i){"use strict";var t=function(t){this.options=i.extend({},this.defaults,t),this.active=document.querySelector("input[name=_active_tab]"),this.referrer=document.querySelector("input[name=_wp_http_referer]"),this.tabs=document.querySelectorAll(this.options.tabSelector),this.views=document.querySelectorAll(this.options.viewSelector),this.active&&this.referrer&&this.tabs&&this.views&&this.t()};t.prototype={defaults:{tabSelector:".glsr-nav-tab",viewSelector:".glsr-nav-view"},t:function(){[].forEach.call(this.tabs,function(t,i){(location.hash?t.getAttribute("href").slice(1)===location.hash.slice(2):0===i)&&this.Y(t),t.addEventListener("click",this.h.bind(this)),t.addEventListener("touchend",this.h.bind(this))}.bind(this))},Z:function(t){return t?"add":"remove"},h:function(t){t.preventDefault(),t.target.blur(),this.Y(t.target),location.hash="!"+t.target.getAttribute("href").slice(1)},$:function(t){var i=this.referrer.value.split("#")[0]+"#!"+this.views[t].id;this.referrer.value=i},Y:function(n){[].forEach.call(this.tabs,function(t,i){var s=this.Z(t===n);"add"===s&&(this.active.value=this.views[i].id,this.$(i),this.tt(i)),t.classList[s]("nav-tab-active")}.bind(this))},tt:function(n){[].forEach.call(this.views,function(t,i){var s=this.Z(i!==n);t.classList[s]("ui-tabs-hide")}.bind(this))}},GLSR.Tabs=t}(jQuery),function(i){"use strict";var t=function(){var t=document.querySelector("#contentdiv > textarea");t&&(this.it(t),i(document).on("wp-window-resized.editor-expand",function(){this.it(t)}.bind(this)))};t.prototype={it:function(t){var i=320<t.scrollHeight?t.scrollHeight:320;t.style.height="auto",t.style.height=i+"px"}},GLSR.TextareaResize=t}(jQuery),GLSR.keys={DOWN:40,ENTER:13,ESC:27,SPACE:32,UP:38},jQuery(function(){GLSR.ColorPicker(),new GLSR.Forms("form.glsr-form"),new GLSR.Logger,new GLSR.Pinned,new GLSR.Pointers,new GLSR.Search("#glsr-search-posts",{action:"search-posts",onInit:function(){this.el.on("click",".glsr-remove-button",this.st.bind(this))},onResultClick:function(t){var i=x(t.target),s=wp.template("glsr-assigned-post"),n={url:i.data("url"),title:i.text()};s&&(this.el.find("input#assigned_to").val(i.data("id")),this.el.find(".description").html(s(n)),this.el.on("click",".glsr-remove-button",this.st.bind(this)),this.T())}}),new GLSR.Search("#glsr-search-translations",{action:"search-translations",onInit:function(){this.b()},onResultClick:function(t){var s=x(t.target),i=s.data("entry"),n=wp.template("glsr-string-"+(i.p1?"plural":"single"));i.index=this.options.entriesEl.children().length,i.prefix=this.options.resultsEl.data("prefix"),n&&(this.options.entriesEl.append(n(i)),this.options.exclude.push({id:i.id}),this.options.results=this.options.results.filter(function(t,i){return i!==s.get(0)})),this.y()}}),new GLSR.Status("a.glsr-change-status"),new GLSR.Tabs,new GLSR.TextareaResize});